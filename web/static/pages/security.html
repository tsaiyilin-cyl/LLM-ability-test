<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®‰å…¨æ”»å‡»æµ‹è¯• - LLM èƒ½åŠ›æµ‹è¯•å¹³å°</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸ›¡ï¸ å®‰å…¨æ”»å‡»æµ‹è¯•</h1>
            <p>æµ‹è¯•æ¨¡å‹å¯¹å±é™©è¯·æ±‚çš„é˜²æŠ¤èƒ½åŠ›</p>
            <a href="/static/index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
        </header>

        <!-- API é…ç½® -->
        <section class="card">
            <div class="collapsible-header" onclick="toggleSection('configBody')">
                <h3>âš™ï¸ API é…ç½®</h3>
                <span class="toggle-icon" id="configIcon">â–¼</span>
            </div>
            <div class="collapsible-body" id="configBody">
                <div class="form-grid">
                    <div class="form-field">
                        <label>API Base URL</label>
                        <input type="text" id="apiBaseUrl" placeholder="https://api.openai.com">
                    </div>
                    <div class="form-field">
                        <label>API Key</label>
                        <div class="input-with-toggle">
                            <input type="password" id="apiKey" placeholder="sk-xxxxxxxx">
                            <button class="toggle-visibility" onclick="toggleKeyVisibility()">ğŸ‘ï¸</button>
                        </div>
                    </div>
                </div>
                <div class="btn-group mt-2">
                    <button class="btn btn-primary btn-sm" onclick="App.saveApiConfig()">ğŸ’¾ ä¿å­˜</button>
                    <button class="btn btn-secondary btn-sm" onclick="App.testConnection()">ğŸ”— æµ‹è¯•è¿æ¥</button>
                </div>
                <div class="status info mt-1" id="apiStatus">âšª ç‚¹å‡»æµ‹è¯•è¿æ¥</div>
            </div>
        </section>

        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="form-grid">
            <div class="card">
                <h3 class="mb-1">é€‰æ‹©æ¨¡å‹</h3>
                <select id="modelSelect">
                    <optgroup label="å›½å†…æ¨¡å‹">
                        <option value="ernie-5.0-thinking-preview">æ–‡å¿ƒ 5.0</option>
                        <option value="doubao-pro-32k">è±†åŒ…</option>
                        <option value="moonshot-v1-8k">Kimi</option>
                        <option value="qwen-turbo">é€šä¹‰åƒé—®</option>
                    </optgroup>
                    <optgroup label="å›½å¤–æ¨¡å‹">
                        <option value="o3" selected>OpenAI o3</option>
                        <option value="gpt-5.2-thinking">GPT-5.2 Thinking</option>
                        <option value="claude-3-5-sonnet-20241022">Claude 3.5 Sonnet</option>
                        <option value="gemini-3-pro-preview-thinking-*">Gemini 3 Pro Thinking</option>
                        <option value="gemini-2.5-pro-preview-thinking">Gemini 2.5 Pro Thinking</option>
                        <option value="grok-beta">Grok</option>
                        <option value="llama-3.1-70b-instruct">Llama 3.1</option>
                    </optgroup>
                </select>
            </div>

            <div class="card">
                <h3 class="mb-1">æµ‹è¯•è¯­è¨€</h3>
                <select id="langSelect">
                    <option value="zh">ä¸­æ–‡</option>
                    <option value="en">English</option>
                    <option value="all">ğŸŒ ä¸­è‹±å…¨é€‰</option>
                </select>
            </div>

            <div class="card">
                <h3 class="mb-1">æ‰§è¡Œæµ‹è¯•</h3>
                <button class="btn btn-primary btn-block" id="runTestBtn" onclick="App.runTests()">
                    ğŸš€ è¿è¡Œé€‰ä¸­æµ‹è¯•
                </button>
                <div class="checkbox-wrapper mt-1">
                    <input type="checkbox" id="selectAll" onchange="App.toggleSelectAll()">
                    <label for="selectAll" style="color: var(--text-secondary); font-size: 0.875rem;">å…¨é€‰æ‰€æœ‰ç”¨ä¾‹</label>
                </div>
            </div>
        </div>

        <!-- æç¤ºè¯é…ç½® -->
        <section class="card">
            <div class="collapsible-header" onclick="toggleSection('promptBody')">
                <h3>ğŸ“ æç¤ºè¯é…ç½®</h3>
                <span class="toggle-icon" id="promptIcon">â–¼</span>
            </div>
            <div class="collapsible-body open" id="promptBody">
                <div class="form-grid">
                    <div class="form-field">
                        <label>System Prompt <span style="font-size: 0.7rem; color: var(--accent-primary);">(ç³»ç»Ÿæç¤ºè¯)</span></label>
                        <textarea id="sysPrompt" placeholder="è¾“å…¥ç³»ç»Ÿæç¤ºè¯..."></textarea>
                        <span class="hint">å®šä¹‰ AI åŠ©æ‰‹çš„è§’è‰²å’Œè¡Œä¸º</span>
                    </div>
                    <div class="form-field">
                        <label>User Prompt <span style="font-size: 0.7rem; color: var(--accent-primary);">(ç”¨æˆ·æç¤ºè¯æ¨¡æ¿)</span></label>
                        <textarea id="userPrompt" placeholder="è¾“å…¥ç”¨æˆ·æç¤ºè¯æ¨¡æ¿..."></textarea>
                        <span class="hint">ä½¿ç”¨ <code>{question}</code> ä½œä¸ºé—®é¢˜å ä½ç¬¦</span>
                    </div>
                </div>
                <div class="btn-group mt-2">
                    <button class="btn btn-secondary btn-sm" onclick="App.resetPrompts()">ğŸ”„ é‡ç½®ä¸ºé»˜è®¤</button>
                    <button class="btn btn-secondary btn-sm" onclick="App.savePrompts()">ğŸ’¾ ä¿å­˜æç¤ºè¯</button>
                </div>
            </div>
        </section>

        <!-- æµ‹è¯•ç”¨ä¾‹ -->
        <section class="card">
            <h3 class="mb-1">ğŸ“‹ å®‰å…¨æµ‹è¯•ç”¨ä¾‹</h3>
            <div class="test-grid" id="testCasesGrid">
                <!-- æµ‹è¯•ç”¨ä¾‹å°†åœ¨è¿™é‡ŒåŠ è½½ -->
            </div>
        </section>

        <!-- æµ‹è¯•ç»“æœ -->
        <section class="card hidden" id="resultsSection">
            <div class="card-header">
                <h3>ğŸ“Š æµ‹è¯•ç»“æœ</h3>
                <div class="btn-group">
                    <button class="btn btn-primary btn-sm" onclick="Components.generateEvaluationReport()">ğŸ“‹ ç”Ÿæˆè¯„ä¼°æŠ¥å‘Š</button>
                    <button class="btn btn-secondary btn-sm" onclick="App.clearResults()">æ¸…ç©ºç»“æœ</button>
                </div>
            </div>
            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-value" id="totalTests">0</div>
                    <div class="stat-label">æ€»æµ‹è¯•æ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="passedCount">0</div>
                    <div class="stat-label">æ‹’ç»å›ç­”</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="avgTime">0s</div>
                    <div class="stat-label">å¹³å‡å“åº”</div>
                </div>
            </div>
            <div id="resultsContainer"></div>
        </section>
    </div>

    <script src="/static/js/api.js"></script>
    <script src="/static/js/components.js"></script>
    <script src="/static/js/app.js"></script>
    <script>
        // æŠ˜å é¢æ¿
        function toggleSection(id) {
            const body = document.getElementById(id);
            const iconId = id.replace('Body', 'Icon');
            const icon = document.getElementById(iconId);
            body.classList.toggle('open');
            if (icon) icon.classList.toggle('open');
        }

        // å¯†ç å¯è§æ€§
        function toggleKeyVisibility() {
            const input = document.getElementById('apiKey');
            input.type = input.type === 'password' ? 'text' : 'password';
        }

        // åˆå§‹åŒ–
        App.init('security');
    </script>
</body>
</html>

